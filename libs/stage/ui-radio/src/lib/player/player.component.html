<audio #audio></audio>

<section>
  <div class="flex flex-row gap-8 align-center">
    <button
      #prev
      mat-mini-fab
      type="button"
      aria-label="Voltar música"
      (click)="onPrev()"
    >
      <mat-icon>skip_previous</mat-icon>
    </button>
    <button
      #play
      mat-fab
      type="button"
      color="primary"
      [attr.aria-label]="audio.paused ? 'Tocar música' : 'Pausar música'"
      (click)="onPlay()"
    >
      <mat-icon>{{ audio.paused ? 'play_arrow' : 'pause' }}</mat-icon>
    </button>
    <button
      #next
      mat-mini-fab
      type="button"
      aria-label="Pular música"
      (click)="onNext()"
    >
      <mat-icon>skip_next</mat-icon>
    </button>
  </div>

  <div class="flex flex-column flex-1 align-center">

    <mat-slider
      #duration
      class="flex-1"
      [max]="audio.duration"
      [value]="audio.currentTime"
      (input)="onChange($event.value)"
    >
    </mat-slider>

    <marquee behavior="alternate">{{ song?.name ?? '' }}</marquee>
  </div>
  <span>{{ audio.currentTime | time }}</span>

  <button
    #mute
    mat-mini-fab
    type="button"
    color="primary"
    [attr.aria-label]="audio.muted ? 'Tirar som' : 'Colocar som'"
    (click)="onMute()"
  >
    <mat-icon>{{ audio.muted ? 'volume_off' : 'volume_up' }}</mat-icon>
  </button>

  <button
    #next
    mat-mini-fab
    type="button"
    aria-label="Carregar música"
    (click)="file.click()"
  >
    <mat-icon>library_music</mat-icon>
  </button>

</section>

<input #file type="file" accept="audio/mp3,audio/*;capture=microphone" hidden aria-label="File">
