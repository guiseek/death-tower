function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=e.parcelRequire2fe5;null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){r[t]=e},e.parcelRequire2fe5=i),i.register("bXuNP",(function(e,n){var r,i;t(e.exports,"register",(()=>r),(t=>r=t)),t(e.exports,"resolve",(()=>i),(t=>i=t));var o={};r=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)o[e[n]]=t[e[n]]},i=function(t){var e=o[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),i("bXuNP").register(JSON.parse('{"kyWCV":"index.06b58774.js","hts9X":"time-wave-pass-by-4.82ae776b.mp3","mZqOX":"time-wave-ripple-2.705ccf6f.mp3","7z5iz":"clock-ticking.369b835b.mp3","2Y9IQ":"thunder-rumble.8aefcfcc.mp3","2vBSq":"yeaah.535f7812.mp3","dDxAQ":"scream.1ffa8df8.mp3","bcCjA":"running.eaae51b0.mp3","ctoNW":"jump-spring.7791f55a.mp3","kcC6D":"jump-spring-down.3063aeb8.mp3","8TMn7":"state=standing.98efbd19.png","7HPVm":"state=jumping-up.d49aa1e5.png","kV6in":"state=jumping-down.4eab5940.png","blUf3":"state=running.29928f62.png","aHIPY":"state=walking.9be714d0.png"}'));const o=new class{get url(){return location}constructor(){this.search=new URLSearchParams(this.url.search)}hasParam(t){return this.search.has(t)}addParam(t,e){this.search.append(t,`${e}`)}setParam(t,e){this.search.set(t,`${e}`)}getParams(){return Object.fromEntries(this.search.entries())}reload(){this.url.reload()}clear(){history.pushState({},document.title,"/")}};function s(t,e,...n){t.ctx.fillStyle=e,t.ctx.beginPath(),t.ctx.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e++)t.ctx.lineTo(n[e].x,n[e].y);t.ctx.fill()}function a(t,e,n){var r=n/180*Math.PI;return e+t*Math.cos(r)}function c(t,e,n){let r=a(e,800,n-t.platform.width/2),i=a(e,800,n+t.platform.width/2);return{left:r,right:i,width:i-r,unit:(i-r)/8}}class u{constructor(t,e){this.x=t,this.y=e,this.x=t,this.y=e}}let l=0;class p{constructor(t,e){this.x=t,this.y=e,this.n=l++,this.x=t,this.y=e,this.infront=!1,this.outerBox=null}getY(t){return this.y+t.state.pos.y}isInFront(t){const e=this.x-t.state.pos.x,n=(c(t,600,e),c(t,680,e));return this.infront=n.left>n.right,this.infront}drawFront(t){t.ctx.fillStyle=t.colors.wood2,t.ctx.fillRect(this.outerBox.left,this.getY(t),this.outerBox.width,t.platform.height)}draw(t){const e=this.x-t.state.pos.x,n=c(t,600,e),r=c(t,680,e),i=n.left>r.left;this.infront=r.left>r.right;for(let e of["left","right"]){let o="left"===e?r.unit:6*r.unit,a={top:{left:new u(r.left+o,this.getY(t)+t.platform.height),right:new u(r.left+r.unit+o,this.getY(t)+t.platform.height)},bottom:{left:new u(n.left+o,this.getY(t)+70),right:new u(n.left+n.unit+o,this.getY(t)+70)}},c={top:{left:new u(r.left+o,this.getY(t)+(t.platform.height-10)),right:new u(r.left+r.unit+o,this.getY(t)+(t.platform.height-10))},bottom:{left:new u(n.left+o,this.getY(t)+60),right:new u(n.left+n.unit+o,this.getY(t)+60)}};s(t,t.colors.wood3,c.top.left,c.bottom.left,c.bottom.right,c.top.right),s(t,t.colors.wood4,a.top.left,a.bottom.left,a.bottom.right,a.top.right),i?s(t,t.colors.wood5,c.top.left,a.top.left,a.bottom.left,c.bottom.left):s(t,t.colors.wood5,c.top.right,a.top.right,a.bottom.right,c.bottom.right)}t.ctx.fillStyle=t.colors.wood1,i?t.ctx.fillRect(n.left,this.getY(t),r.left-n.left,t.platform.height):t.ctx.fillRect(r.right,this.getY(t),n.left-r.left,t.platform.height),this.outerBox=r}}function d(t,e,n,r,i,o){const s=t.createLinearGradient(e,0,e+n,0);s.addColorStop(0,i),s.addColorStop(1,o),t.fillStyle=s,t.fillRect(e,0,n,r)}class h{constructor(t,e){this.width=t,this.height=e;let n=document.createElement("canvas");n.width=t,n.height=e,this.ctx=n.getContext("2d"),this.canvas=n}}function f(t,e){e&&(t.state.activePlatforms=[]),t.platforms.forEach((n=>{n.x<t.state.pos.x-40||n.x>t.state.pos.x+220||(e?n.isInFront(t)&&(n.draw(t),t.state.activePlatforms.push(n)):n.isInFront(t)||n.draw(t))}));for(let e=0;e<t.state.activePlatforms.length;e++)t.state.activePlatforms[e].drawFront(t)}function m(t,e,n){"ArrowLeft"===e.key&&(t.input.left=n),"ArrowRight"===e.key&&(t.input.right=n),"ArrowDown"===e.key&&(t.input.flip=n)," "===e.key&&(t.input.jump=n)}function y(t){const e=1.70158;return--t*t*((e+1)*t+e)+1}function g(t,e,n){const r=new h(t.tower.width,e);t.brick.padding;let i=t.brick.padding,o={x:0,y:0},s=t.brick.width;const c=t.brick.width;let u=!0;const l=r.ctx.createLinearGradient(0,0,r.canvas.width,e);l.addColorStop(0,"black"),l.addColorStop(.35,"#353637"),l.addColorStop(.65,"#353637"),l.addColorStop(1,"black"),r.ctx.fillStyle=l,r.ctx.fillRect(0,0,r.canvas.width,r.canvas.height);for(let e=0;e<2;e++){for(let e=180+n;e<=360;e+=c)o=a(600,600,e),u&&(e+=c/2,u=!1),s=a(600,600,e+c),r.ctx.fillStyle=t.brick.color,r.ctx.fillRect(o,i,s-o-t.brick.padding,t.brick.height),r.ctx.fillStyle=t.brick.shade,r.ctx.fillRect(o,i,s-o-t.brick.padding,3);i+=t.brick.padding,i+=t.brick.height}return r.canvas}function v(t,e,n,r,i,o){return o&&(t.ctx.fillStyle=o,t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height)),t.ctx.fillStyle=e,t.ctx.beginPath(),t.ctx.moveTo(n,90),t.ctx.lineTo(n,90+i),t.ctx.lineTo(n+r,90+i),t.ctx.lineTo(n+r,90),t.ctx.ellipse(n+r/2,90,r/2,90,0,0,Math.PI,!0),t.ctx.fill(),t.canvas}class w{constructor(t,e){this.x=t,this.y=e,this.x=t,this.y=e}draw(t){const e=this.x-t.state.pos.x,n=a(600,800,e-t.platform.width/2),r=a(600,800,e+t.platform.width/2);if(n>r){const i=a(560,800,e-t.platform.width/2),o=a(560,800,e+t.platform.width/2),s=new h(1600,250),c=v(new h(1600,250),"#2A3849",o,i-o,250,"#262525"),u=v(s,t.ctx.createPattern(c,"no-repeat"),r,n-r,250);t.ctx.drawImage(u,0,this.y+t.state.pos.y)}}}function b(t,e){if(t.lastPlatform&&e.n>t.lastPlatform.n){t.lastPlatform=e;const n=-1e3*t.player.speed;t.points=e.n*n}}function x(t,e,n,r,i){let o=new h(317,300),s=new Image;return s.onload=function(){i&&(o.ctx.save(),o.ctx.scale(-1,1)),o.ctx.drawImage(s,0,0,317*(i?-1:1),300),i&&o.ctx.restore(),t.animationFrames[n][r]=o.canvas},s.src=e,o.canvas}const S={training:{x:{min:15,max:20},y:{min:15,max:20}},easy:{x:{min:30,max:40},y:{min:30,max:30}},medium:{x:{min:20,max:45},y:{min:20,max:35}},hard:{x:{min:15,max:58},y:{min:15,max:40}}};function k(t){t.rect=t.container.getBoundingClientRect(),t.canvas.height,window.innerHeight}const _={platforms:[],doors:[new w(1600,350),new w(1205,-1160)],savedState:null,state:{ready:!1,paused:!1,finished:!1,points:0,lastPlatform:null,platformReached:null,titles:{opacity:0,ready:!1,text:"Não foi desta vez"},winner:{opacity:0,ready:!1,text:"Você conseguiu!!!"},climbstarted:!1,time:null,dt:null,climbspeed:{normal:.05,fast:.12},pos:{x:1510,y:0},lastPos:{x:1510,y:0},activePlatforms:[],jump:{isGrounded:!0,isJumping:!1,isBoosting:!1,speed:0,nextY:0},player:{dir:1,x:725,y:350,prevY:350,speed:0,animationFrame:0,animationFrameCount:0}}};const j={brick:{shine:"",shade:"rgba(256, 256, 256, 0.8)",color:"#7C747D",width:16,height:48,padding:4},platform:{height:22,width:13,color:"#5A4142"},tower:{width:1200,shadowWidth:130,skyWidth:200},sky:{bg:"rgb(10, 10, 10)",starSizes:[2,3,4,5],starColors:["#1E728C","#98ECFF","#7AEFFF","#FFF385"]},settings:{maxSpeed:.09,minSpeed:.01,friction:.7,acceleration:.02,jump:{gravity:{boost:.0014,normal:.003,down:.004},maxSpeed:.6,fallStartSpeed:.07,friction:.98}},colors:{bg:"#FBD0D0",wood1:"#B5754C",wood2:"#CB946D",wood3:"#4B3937",wood4:"#EB9A67",wood5:"#B46736"},storage:{bricks:null,sky:null,shadows:null},input:{left:!1,right:!1,jump:!1,flip:!1}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function R(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function E(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function I(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function C(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function U(t){return this instanceof U?(this.v=t,this):new U(t)}function F(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof U?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function c(t){a("next",t)}function u(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r}function T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}return n?n.call(t):(t=I(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e)}Object.create;function O(t){return"function"==typeof t}function B(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var H=B((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function q(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var N=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=I(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else o.remove(this);var c=this.initialTeardown;if(O(c))try{c()}catch(t){i=t instanceof H?t.errors:[t]}var u=this._teardowns;if(u){this._teardowns=null;try{for(var l=I(u),p=l.next();!p.done;p=l.next()){var d=p.value;try{$(d)}catch(t){i=null!=i?i:[],t instanceof H?i=C(C([],L(i)),L(t.errors)):i.push(t)}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(i)throw new H(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)$(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&q(e,t)},t.prototype.remove=function(e){var n=this._teardowns;n&&q(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),D=N.EMPTY;function W(t){return t instanceof N||t&&"closed"in t&&O(t.remove)&&O(t.add)&&O(t.unsubscribe)}function $(t){O(t)?t():t.unsubscribe()}var M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},z={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=z.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,C([],L(t)))},clearTimeout:function(t){var e=z.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Y(t){z.setTimeout((function(){var e=M.onUnhandledError;if(!e)throw t;e(t)}))}function V(){}var X=J("C",void 0,void 0);function J(t,e,n){return{kind:t,value:e,error:n}}var G=null;function K(t){if(M.useDeprecatedSynchronousErrorHandling){var e=!G;if(e&&(G={errorThrown:!1,error:null}),t(),e){var n=G,r=n.errorThrown,i=n.error;if(G=null,r)throw i}}else t()}function Q(t){M.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=t)}var Z=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,W(e)&&e.add(n)):n.destination=it,n}return A(e,t),e.create=function(t,e,n){return new tt(t,e,n)},e.prototype.next=function(t){this.isStopped?rt(function(t){return J("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?rt(J("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?rt(X,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(N),tt=function(t){function e(e,n,r){var i,o=t.call(this)||this;if(O(e))i=e;else if(e){var s;i=e.next,n=e.error,r=e.complete,o&&M.useDeprecatedNextContext?(s=Object.create(e)).unsubscribe=function(){return o.unsubscribe()}:s=e,i=null==i?void 0:i.bind(s),n=null==n?void 0:n.bind(s),r=null==r?void 0:r.bind(s)}return o.destination={next:i?et(i,o):V,error:et(null!=n?n:nt,o),complete:r?et(r,o):V},o}return A(e,t),e}(Z);function et(t,e){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{t.apply(void 0,C([],L(e)))}catch(t){M.useDeprecatedSynchronousErrorHandling?Q(t):Y(t)}}}function nt(t){throw t}function rt(t,e){var n=M.onStoppedNotification;n&&z.setTimeout((function(){return n(t,e)}))}var it={closed:!0,next:V,error:nt,complete:V},ot="function"==typeof Symbol&&Symbol.observable||"@@observable";function st(t){return t}function at(t){return 0===t.length?st:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var ct=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,i=this,o=(r=t)&&r instanceof Z||function(t){return t&&O(t.next)&&O(t.error)&&O(t.complete)}(r)&&W(r)?t:new tt(t,e,n);return K((function(){var t=i,e=t.operator,n=t.source;o.add(e?e.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=ut(e))((function(e,r){var i=new tt({next:function(e){try{t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[ot]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return at(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=ut(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function ut(t){var e;return null!==(e=null!=t?t:M.Promise)&&void 0!==e?e:Promise}var lt=B((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),pt=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return A(e,t),e.prototype.lift=function(t){var e=new dt(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new lt},e.prototype.next=function(t){var e=this;K((function(){var n,r;if(e._throwIfClosed(),!e.isStopped){var i=e.observers.slice();try{for(var o=I(i),s=o.next();!s.done;s=o.next()){s.value.next(t)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;K((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;K((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=e.hasError,r=e.isStopped,i=e.observers;return n||r?D:(i.push(t),new N((function(){return q(i,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,r=e.thrownError,i=e.isStopped;n?t.error(r):i&&t.complete()},e.prototype.asObservable=function(){var t=new ct;return t.source=this,t},e.create=function(t,e){return new dt(t,e)},e}(ct),dt=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return A(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:D},e}(pt),ht=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return A(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){var t=this,e=t.hasError,n=t.thrownError,r=t._value;if(e)throw n;return this._throwIfClosed(),r},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(pt),ft=function(t){function e(e,n){return t.call(this)||this}return A(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(N),mt={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=mt.delegate;return((null==n?void 0:n.setInterval)||setInterval).apply(void 0,C([],L(t)))},clearInterval:function(t){var e=mt.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},yt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return A(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),mt.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;mt.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,q(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(ft),gt={now:function(){return(gt.delegate||Date).now()},delegate:void 0},vt=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=gt.now,t}(),wt=new(function(t){function e(e,n){void 0===n&&(n=vt.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return A(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(vt))(yt),bt=wt;function xt(t,e,n){void 0===t&&(t=0),void 0===n&&(n=bt);var r,i=-1;return null!=e&&((r=e)&&O(r.schedule)?n=e:i=e),new ct((function(e){var r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);var o=0;return n.schedule((function(){e.closed||(e.next(o++),0<=i?this.schedule(void 0,i):e.complete())}),r)}))}function St(t,e){return void 0===t&&(t=0),void 0===e&&(e=wt),t<0&&(t=0),xt(t,t,e)}var kt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function _t(t){if(t instanceof ct)return t;if(null!=t){if(function(t){return O(t[ot])}(t))return s=t,new ct((function(t){var e=s[ot]();if(O(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((o=t)&&"number"==typeof o.length&&"function"!=typeof o)return i=t,new ct((function(t){for(var e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()}));if(O(null==(r=t)?void 0:r.then))return n=t,new ct((function(t){n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Y)}));if(function(t){return Symbol.asyncIterator&&O(null==t?void 0:t[Symbol.asyncIterator])}(t))return jt(t);if(function(t){return O(null==t?void 0:t[kt])}(t))return e=t,new ct((function(t){var n,r;try{for(var i=I(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()}));if(function(t){return O(null==t?void 0:t.getReader)}(t))return jt(function(t){return F(this,arguments,(function(){var e,n,r;return E(this,(function(i){switch(i.label){case 0:e=t.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,U(e.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,U(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,U(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}(t))}var e,n,r,i,o,s;throw function(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(t)}function jt(t){return new ct((function(e){(function(t,e){var n,r,i,o;return R(this,void 0,void 0,(function(){var s,a;return E(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=T(t),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Pt(t){return function(e){if(function(t){return O(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var At=function(t){function e(e,n,r,i,o){var s=t.call(this,e)||this;return s.onFinalize=o,s._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,s._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return A(e,t),e.prototype.unsubscribe=function(){var e,n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))},e}(Z);var Rt=new ct((function(t){return t.complete()}));function Et(t,e){return void 0===e&&(e=st),t=null!=t?t:It,Pt((function(n,r){var i,o=!0;n.subscribe(new At(r,(function(n){var s=e(n);!o&&t(i,s)||(o=!1,i=s,r.next(n))})))}))}function It(t,e){return t===e}class Lt{get state(){return this.state$.getValue()}constructor(t){this.state$=new ht(t)}select(t){return this.state$.asObservable().pipe((e=e=>t(e),Pt((function(t,r){var i=0;t.subscribe(new At(r,(function(t){r.next(e.call(n,t,i++))})))}))),Et());var e,n}setState(t){this.state$.next({...this.state,...t})}}const Ct=new class{_getArrow(t){switch(t){case"ArrowLeft":return"left";case"ArrowRight":return"right";case"ArrowUp":return"up";case"ArrowDown":return"down"}}_inArrows(t){return this._arrows.includes(t)}_isSpace(t){return" "===t}_getKey(t){return t.toLowerCase()}_getState(t){return this._inArrows(t)?this._getArrow(t):this._isSpace(t)?"space":this._getKey(t)}initialize(){window.addEventListener("keydown",this._setState),window.addEventListener("keyup",this._setState)}stop(){window.removeEventListener("keydown",this._setState),window.removeEventListener("keyup",this._setState)}constructor(){this.state=new ht(null),this.state$=this.state.asObservable().pipe(Et(((t,e)=>t===e))),this._arrows=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],this._setState=t=>{this.state.next(this._getState(t.key))}}};const Ut=new class extends Lt{boost(){this.setState({boosting:!0})}jumpUp(){this.setState({jumping:!0,boosting:!0,grounded:!1})}jumpDown(){this.setState({jumping:!1,boosting:!1})}setSpeed(t){this.setState({speed:t})}setPlatform(t){this.setState({platform:t})}run(){this.setState({running:!0})}idle(){this.setState({running:!1})}pause(){this.setState({paused:!0})}resume(){this.setState({paused:!1})}toTurn(t){this.setState({dir:t})}get grounded(){return this.state.grounded}get boosting(){return this.state.boosting}get jumping(){return this.state.jumping}get running(){return this.state.running}get paused(){return this.state.paused}get platform(){return this.state.platform}get speed(){return this.state.speed}get pos(){return this.state.pos}get dir(){return this.state.dir}constructor(...t){super(...t),this.grounded$=this.select((t=>t.grounded)),this.boosting$=this.select((t=>t.boosting)),this.jumping$=this.select((t=>t.jumping)),this.running$=this.select((t=>t.running)),this.platform$=this.select((t=>t.platform)),this.paused$=this.select((t=>t.paused)),this.dir$=this.select((t=>t.dir)),this.pos$=this.select((t=>t.pos)),this.speed$=this.select((t=>t.speed))}}({grounded:!1,boosting:!1,jumping:!1,running:!1,paused:!1,platform:0,dir:1,pos:new u(0,0),speed:0});function Ft(t,e){t.state.dt&&t.state.winner.opacity<100&&(t.state.winner.opacity+=Math.floor(.2*t.state.dt)),t.state.winner.opacity>100&&(t.state.winner.opacity=100),t.ctx&&t.canvas&&(t.ctx.fillStyle="rgba(10, 10, 10, "+t.state.winner.opacity/100+")",t.ctx.rect(0,0,t.canvas.width,t.canvas.height),t.ctx.fill(),t.ctx.fillStyle="rgba(6, 231, 65, "+t.state.winner.opacity/100+")",t.ctx.font="64px 'Germania One', cursive",t.ctx.fillText(t.state.winner.text,600,440-40*y(t.state.winner.opacity/100)),e&&(t.ctx.fillStyle="rgba(255, 255, 255, "+t.state.winner.opacity/100+")",t.ctx.font="48px 'Germania One', cursive",t.ctx.fillText(`Desafio: #${e}`,650,520-40*y(t.state.winner.opacity/100)))),100==t.state.winner.opacity&&t.input.jump&&(t.state.winner.ready=!0),t.state.winner.ready&&t.input.jump&&(t.state=JSON.parse(JSON.stringify(t.savedState)),t.state.lastPlatform=null)}function Tt(t){return document.querySelector(`#${t}`)}var Ot;i.register("kPq84",(function(e,n){var r;t(e.exports,"getBundleURL",(()=>r),(t=>r=t));var i={};function o(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}r=function(t){var e=i[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return o(t[2])}return"/"}(),i[t]=e),e}})),Ot=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("hts9X");const Bt=new URL(Ot);var Ht;Ht=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("mZqOX");const qt=new URL(Ht);var Nt;Nt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("7z5iz");const Dt=new URL(Nt);var Wt;Wt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("2Y9IQ");const $t=new URL(Wt);var Mt;Mt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("2vBSq");const zt=new URL(Mt);var Yt;Yt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("dDxAQ");const Vt=new URL(Yt);var Xt;Xt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("bcCjA");const Jt=new URL(Xt);var Gt;Gt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("ctoNW");const Kt=new URL(Gt);var Qt;Qt=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("kcC6D");const Zt=new URL(Qt),te={timeWavePassBy4:new Audio(Bt.pathname),timeWaveRipple2:new Audio(qt.pathname),jumpSpringDown:new Audio(Zt.pathname),clockTicking:new Audio(Dt.pathname),jumpSpringUp:new Audio(Kt.pathname),running:new Audio(Jt.pathname),thunder:new Audio($t.pathname),scream:new Audio(Vt.pathname),yeaah:new Audio(zt.pathname)};function ee(){let t=!1;var e;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}const ne={fullscreen:Tt("fullscreen"),jump:Tt("jump"),left:Tt("left"),right:Tt("right"),share:Tt("share")},re=document.querySelector("form"),ie=re.elements.namedItem("points"),oe=re.elements.namedItem("seconds");oe.value="40";const se=document.querySelector("#container"),ae=document.querySelector("canvas"),ce=new h(10,10).canvas,ue=function(t={}){return{...j,...t}}(),le=function(t=function(){return document.createElement("div")}(),e=function(){return document.createElement("canvas")}(),n=function(){return new h(10,10).canvas}(),r){const i=e.getContext("2d"),o=t.getBoundingClientRect();return{container:t,canvas:e,ctx:i,rect:o,audioAction:r,animationFrames:{standing:[n,n],jumpingUp:[n,n],jumpingDown:[n,n],runningLeft:[n,n,n,n],runningRight:[n,n,n,n]}}}(se,ae,ce,te);ne.share.onclick=()=>{const t=function(t){const e=t.map((({x:t,y:e})=>`${t.toString(16)},${e.toString(16)}`)).join(";"),n=new URLSearchParams(location.search);return n.set("points",e),n.toString()}(ge),e=`${location.origin}/?${t+location.hash}`;navigator.clipboard.writeText(e).then((()=>{location.search=t}))};const pe=(de=location.search,(new URLSearchParams(de).get("points")??"").split(";").map((t=>{const[e,n]=t.split(",");return{x:parseInt(e,16),y:parseInt(n,16)}})));var de;const he=location.hash.substring(1);pe.length||he||(location.hash="training");const fe=(ye=me=he,Object.keys(S).includes(ye)?S[me]:S.training);var me,ye;const ge=new URLSearchParams(location.search).has("points")?pe:function(t,e=80){let n=0,r=0;const i=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;return new Array(e).fill({x:n,y:r}).map(((e,o)=>(n=0===n?1600:i(n-t.x.min,n-t.x.max),r=0===r?600:i(r-(t.y.min-20),r-2.5*t.y.max),{x:n,y:r})))}(fe,fe.y.max-2),ve=ge.map((({x:t,y:e})=>new p(t,e)));var we;we=ge,window.positions=we;const be=pe.length?function(t){const e=t.reduce(((t,e)=>({y:t.y+=e.y,x:t.x+=e.x})));return e.x-e.y}(pe):null,xe=[new w(1600,350)],Se=ge.pop();Se&&xe.push(new w(Se.x,Se.y-250));const ke={...ue,...le,...function(t={}){return{..._,...t}}({doors:xe})};ke.platforms.push(...ve),onpopstate=()=>o.reload();let _e=!1;function je(t){t.audioAction.timeWaveRipple2.play(),t.audioAction.scream.play(),Pe.reset(),Ut.idle(),Ut.pause(),t.state.ready=!1,t.state.paused=!0,_e=!0}const Pe=new class{get countdown$(){return this._countdown.asObservable()}get gameover$(){return this._gameover.asObservable().pipe((t=1)<=0?function(){return Rt}:Pt((function(e,n){var r=0;e.subscribe(new At(n,(function(e){++r<=t&&(n.next(e),t<=r&&n.complete())})))})));var t}constructor(t=60){this.duration=t,this._countdown=new ht(t),this._gameover=new ht(!1)}start(){const t=this._timeKeeper(this.duration);this._sub=t.pipe().subscribe((t=>{const e=this.duration-t;this._countdown.next(e),this._sub&&e<=0&&this._sub.unsubscribe()}))}reset(){this._sub&&this._sub.unsubscribe(),this.start()}_timeKeeper(t=this.duration){const e=St(1e3),n=xt(1e3*(t+2));return e.pipe((r=n,Pt((function(t,e){_t(r).subscribe(new At(e,(function(){return e.complete()}),V)),!e.closed&&t.subscribe(e)}))));var r}}(+oe.value);function Ae(){const t=document.timeline.currentTime??0;var e;ke.state.dt=t-(ke.state.time||t),ke.state.time=t,ke.state.paused||function(){ke.input.left?ke.state.player.speed+=ke.settings.acceleration:ke.input.right?ke.state.player.speed-=ke.settings.acceleration:0!==ke.state.player.speed&&(ke.state.player.speed*=ke.state.jump.isJumping?ke.settings.jump.friction:ke.settings.friction);Math.abs(ke.state.player.speed)>ke.settings.maxSpeed?ke.state.player.speed=ke.state.player.speed>0?ke.settings.maxSpeed:-1*ke.settings.maxSpeed:Math.abs(ke.state.player.speed)<ke.settings.minSpeed&&(Ut.idle(),Ut.setSpeed(0),ke.state.player.speed=0);if(0!==ke.state.player.speed){ke.state.jump.isJumping||Ut.run();const t=ke.state.jump.isJumping?.7*ke.state.player.speed:ke.state.player.speed;Ut.setSpeed(t),ke.state.pos.x+=ke.state.player.speed<0?Math.ceil(t*ke.state.dt):Math.floor(t*ke.state.dt);const e=t>0?0:1;Ut.toTurn(e),ke.state.player.dir=e}!ke.state.climbstarted&&ke.input.jump&&(ke.state.climbstarted=!0);if((ke.input.jump||ke.state.jump.isJumping)&&(ke.state.jump.isGrounded&&(Ut.jumpUp(),Ut.idle(),ke.state.jump.isGrounded=!1,ke.state.jump.isJumping=!0,ke.state.jump.isBoosting=!0,ke.state.jump.speed=ke.settings.jump.maxSpeed),ke.state.jump.isJumping)){const t=ke.state.jump.speed>0,e=ke.state.dt<30?30-ke.state.dt:0;!t&&ke.state.jump.isBoosting&&(ke.state.jump.isBoosting=!1),ke.state.player.prevY=ke.state.player.y,ke.state.player.y-=ke.state.jump.speed*ke.state.dt,ke.state.jump.speed-=(ke.settings.jump.gravity[t?ke.state.jump.isBoosting?"boost":"normal":"down"]-2e-5*e)*ke.state.dt}ke.state.jump.isBoosting&&!ke.input.jump&&(ke.state.jump.isBoosting=!1);ke.state.climbstarted&&ke.state.pos.y<1440&&(ke.state.pos.y+=(ke.state.player.y+ke.state.pos.y<250?ke.state.climbspeed.fast:ke.state.climbspeed.normal)*ke.state.dt);(function(){if(ke.state.jump.isJumping&&ke.state.jump.speed<0)for(let t=0;t<ke.state.activePlatforms.length;t++){const e=ke.state.activePlatforms[t];if(Math.abs(e.x-(ke.state.pos.x+90))<10){const t=ke.state.player.y+250,n=ke.state.player.prevY+250;t>e.y&&n<e.y&&(Ut.setPlatform(e.n),Ut.jumpDown(),Ut.idle(),ee()&&navigator.vibrate(50),b(ke.state,e),ie.value=(0|ke.state.points).toString(),ke.state.player.y=e.y-250,ke.state.jump.isGrounded=!0,ke.state.jump.isJumping=!1,ke.state.jump.isBoosting=!1,ke.state.jump.speed=0)}}else if(ke.state.jump.isGrounded){let t=!1;for(let e=0;e<ke.state.activePlatforms.length;e++){let n=ke.state.activePlatforms[e];if(Math.abs(n.x-(ke.state.pos.x+90))<10&&n.y-(ke.state.player.y+250)==0){t=!0;break}}t||(Ut.jumpUp(),ke.state.jump.isGrounded=!1,ke.state.jump.isJumping=!0,ke.state.jump.isBoosting=!0,ke.state.jump.speed=ke.settings.jump.fallStartSpeed)}else ke.doors.forEach((t=>function(t,e){Math.abs(e.x-(t.state.pos.x+40))<10&&(t.state.finished||t.audioAction.yeaah.play())}(ke,t)))})(),ke.state.player.y+ke.state.pos.y>900&&(Ut.pause(),Ut.idle(),ke.state.paused=!0);ke.state.lastPlatform&&ke.state.lastPlatform.n===ve.length-1&&(ke.state.finished=!0)}(),ke.state.lastPlatform||(ke.state.lastPlatform=ke.platforms[0],_e=!1),ke.state.paused||100===ke.state.titles.opacity||100===ke.state.winner.opacity||(function(t){if(null==t.storage.sky){const e=t.canvas.height,n=new h(t.canvas.width,e);n.ctx.fillStyle=t.sky.bg,n.ctx.fillRect(0,0,t.canvas.width,e);for(let r=0;r<150;r++){const r=Math.floor(Math.random()*t.sky.starSizes.length);n.ctx.fillStyle=t.sky.starColors[r],n.ctx.beginPath(),n.ctx.arc(Math.floor(Math.random()*t.canvas.width),Math.floor(Math.random()*e),t.sky.starSizes[r],0,2*Math.PI),n.ctx.fill()}t.storage.sky=n.canvas}else{const e=(t.state.pos.x-2e3)%200*-8,n=t.state.pos.y%t.canvas.height;t.ctx.drawImage(t.storage.sky,e,n),t.ctx.drawImage(t.storage.sky,e-t.canvas.width,n),t.ctx.drawImage(t.storage.sky,e,n-t.canvas.height),t.ctx.drawImage(t.storage.sky,e-t.canvas.width,n-t.canvas.height)}}(ke),f(ke,!1),function(t){const e=2*t.brick.height+2*t.brick.padding;if(!t.storage.bricks){t.storage.bricks={};for(let n=0;n<16;n++)t.storage.bricks["brick"+n]=g(t,e,n)}for(let n=-1;n<12;n++)t.ctx.drawImage(t.storage.bricks["brick"+t.state.pos.x%t.brick.width],t.tower.skyWidth,e*n+t.state.pos.y%e)}(ke),(e=ke).doors.forEach((t=>{t.x<e.state.pos.x-40||t.x>e.state.pos.x+220||t.draw(e)})),function(t){if(t.storage.shadows)t.ctx.drawImage(t.storage.shadows,t.tower.skyWidth,0);else{const e=new h(t.tower.width,t.canvas.height);d(e.ctx,0,t.tower.shadowWidth+80,t.canvas.height,"#666666","transparent"),d(e.ctx,0,t.tower.shadowWidth,t.canvas.height,"rgb(10, 10, 10)","transparent"),d(e.ctx,e.canvas.width-(t.tower.shadowWidth+80),t.tower.shadowWidth+80,t.canvas.height,"transparent","#666666"),d(e.ctx,e.canvas.width-t.tower.shadowWidth,t.tower.shadowWidth,t.canvas.height,"transparent","rgb(10, 10, 10)"),t.storage.shadows=e.canvas}}(ke),f(ke,!0),function(t){const e=t.state.player.y+t.state.pos.y-48,n=t.state.player.x-(t.state.player.dir?120:80);t.state.jump.isJumping?t.state.jump.speed>0?t.ctx.drawImage(t.animationFrames.jumpingUp[t.state.player.dir],n,e):t.ctx.drawImage(t.animationFrames.jumpingDown[t.state.player.dir],n,e):0!==t.state.player.speed?t.state.player.dir?t.ctx.drawImage(t.animationFrames.runningRight[t.state.player.animationFrame],n,e):t.ctx.drawImage(t.animationFrames.runningLeft[t.state.player.animationFrame],n,e):t.ctx.drawImage(t.animationFrames.standing[t.state.player.dir],n,e),t.state.player.animationFrameCount+=t.state.dt,t.state.player.animationFrameCount>50&&(t.state.player.animationFrame+=1,t.state.player.animationFrameCount=0),t.state.player.animationFrame>3&&(t.state.player.animationFrame=0)}(ke)),!ke.state.paused&&ke.state.finished&&(be?Ft(ke,be):Ft(ke),ke.audioAction.clockTicking.paused||ke.audioAction.clockTicking.pause(),Pe.reset()),ke.state.paused&&(!function(t){t.state.dt&&t.state.titles.opacity<100&&(t.state.titles.opacity+=Math.floor(.2*t.state.dt)),t.state.titles.opacity>100&&(t.state.titles.opacity=100),t.ctx.fillStyle="rgba(10, 10, 10, "+t.state.titles.opacity/100+")",t.ctx.rect(0,0,t.canvas.width,t.canvas.height),t.ctx.fill(),t.ctx.fillStyle="rgba(255, 236, 61, "+t.state.titles.opacity/100+")",t.ctx.font="64px 'Germania One', cursive",t.ctx.fillText(t.state.titles.text,600,520-40*y(t.state.titles.opacity/100)),100!=t.state.titles.opacity||t.input.jump||(t.state.titles.ready=!0),t.state.titles.ready&&t.input.jump&&(t.state=JSON.parse(JSON.stringify(t.savedState)),t.state.lastPlatform=null)}(ke),ke.audioAction.clockTicking.paused||ke.audioAction.clockTicking.pause(),_e||je(ke)),requestAnimationFrame(Ae)}var Re;Re=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("8TMn7");var Ee;Ee=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("7HPVm");var Ie;Ie=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("kV6in");var Le;Le=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("blUf3");var Ce;Ce=i("kPq84").getBundleURL("kyWCV")+i("bXuNP").resolve("aHIPY");let Ue=!1;(async()=>{ke.savedState||(ke.savedState=JSON.parse(JSON.stringify(ke.state))),k(ke),window.addEventListener("resize",(()=>k(ke))),window.addEventListener("keydown",(t=>function(t,e){m(t,e,!0)}(ke,t)),!1),window.addEventListener("keyup",(t=>function(t,e){m(t,e,!1)}(ke,t)),!1),ne.jump.ontouchstart=()=>ke.input.jump=!0,ne.jump.ontouchend=()=>ke.input.jump=!1,ne.left.ontouchstart=()=>ke.input.left=!0,ne.left.ontouchend=()=>ke.input.left=!1,ne.right.ontouchstart=()=>ke.input.right=!0,ne.right.ontouchend=()=>ke.input.right=!1,Ct.initialize(),function(t){const e=new URL(Re),n=new URL(Ee),r=new URL(Ie),i=new URL(Le),o=new URL(Ce);x(t,e.pathname,"standing",0,!1),x(t,e.pathname,"standing",1,!0),x(t,n.pathname,"jumpingUp",0,!1),x(t,n.pathname,"jumpingUp",1,!0),x(t,r.pathname,"jumpingDown",0,!1),x(t,r.pathname,"jumpingDown",1,!0),x(t,i.pathname,"runningLeft",0,!1),x(t,i.pathname,"runningLeft",1,!1),x(t,i.pathname,"runningRight",0,!0),x(t,i.pathname,"runningRight",1,!0),x(t,o.pathname,"runningRight",2,!0),x(t,o.pathname,"runningLeft",2,!1),x(t,o.pathname,"runningLeft",3,!1),x(t,o.pathname,"runningRight",3,!0)}(ke),Ae()})().then((async()=>{(()=>{function t(t){t.isTrusted&&(ke.state.ready,ke.state.ready=!0)}["mousemove","scroll","keydown","click","touchstart"].forEach((e=>{document.body.addEventListener(e,t,!1)}))})(),(()=>{const t=ne.fullscreen.querySelector("#fullscreen-enter"),e=ne.fullscreen.querySelector("#fullscreen-exit");ne.fullscreen.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),e?.classList.remove("hidden"),t?.classList.add("hidden")):(document.documentElement.requestFullscreen(),e?.classList.add("hidden"),t?.classList.remove("hidden")),ne.fullscreen.blur(),Ue=!Ue},document.onfullscreenchange=t=>{Ue=!Ue}})(),Pe.countdown$.subscribe((t=>{oe.value=`${t}`,ke.state.paused||0!==t||je(ke),ke.audioAction.clockTicking.paused&&t<20&&ke.audioAction.clockTicking.play()})),Ut.jumping$.subscribe((t=>{!t&&ke.state.ready&&(ke.audioAction.jumpSpringUp.paused||ke.audioAction.jumpSpringUp.pause(),ke.audioAction.jumpSpringDown.paused&&ke.audioAction.jumpSpringDown.play()),t&&ke.state.ready&&(ke.audioAction.jumpSpringDown.paused||ke.audioAction.jumpSpringDown.pause(),ke.audioAction.jumpSpringUp.paused&&ke.audioAction.jumpSpringUp.play())})),Ut.running$.subscribe((t=>{!ke.state.ready&&t&&(console.log("groundToStandOnFound"),ke.audioAction.thunder.play(),Pe.start()),t||ke.audioAction.running.pause(),t&&ke.audioAction.running.play()}))}));
//# sourceMappingURL=index.06b58774.js.map
