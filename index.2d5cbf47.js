function t(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=e.parcelRequire2fe5;function i(t,e,...r){t.ctx.fillStyle=e,t.ctx.beginPath(),t.ctx.moveTo(r[0].x,r[0].y);for(let e=1;e<r.length;e++)t.ctx.lineTo(r[e].x,r[e].y);t.ctx.fill()}function s(t,e,r){var n=r/180*Math.PI;return e+t*Math.cos(n)}function a(t,e,r){let n=s(e,800,r-t.platform.width/2),o=s(e,800,r+t.platform.width/2);return{left:n,right:o,width:o-n,unit:(o-n)/8}}null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in n){var e=n[t];delete n[t];var o={id:t,exports:{}};return r[t]=o,e.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){n[t]=e},e.parcelRequire2fe5=o),o.register("bXuNP",(function(e,r){var n,o;t(e.exports,"register",(()=>n),(t=>n=t)),t(e.exports,"resolve",(()=>o),(t=>o=t));var i={};n=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)i[e[r]]=t[e[r]]},o=function(t){var e=i[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),o("bXuNP").register(JSON.parse('{"kyWCV":"index.2d5cbf47.js","hts9X":"time-wave-pass-by-4.82ae776b.mp3","mZqOX":"time-wave-ripple-2.705ccf6f.mp3","2Y9IQ":"thunder-rumble.8aefcfcc.mp3","2vBSq":"yeaah.535f7812.mp3","dDxAQ":"scream.1ffa8df8.mp3","bcCjA":"running.eaae51b0.mp3","ctoNW":"jump-spring.7791f55a.mp3","kcC6D":"jump-spring-down.3063aeb8.mp3","iQ33o":"state=standing.9f34c781.png","5PaZy":"state=jumping.bbf7be93.png","jIilh":"state=jumpingdown.1edb5401.png","6gG6s":"state=running.c00f14d9.png","4HCHH":"state=walking.6a8407f1.png"}'));class u{constructor(t,e){this.x=t,this.y=e,this.x=t,this.y=e}}let c=0;class l{constructor(t,e){this.x=t,this.y=e,this.n=c++,this.x=t,this.y=e,this.infront=!1,this.outerBox=null}getY(t){return this.y+t.state.pos.y}isInFront(t){const e=this.x-t.state.pos.x,r=(a(t,600,e),a(t,680,e));return this.infront=r.left>r.right,this.infront}drawFront(t){t.ctx.fillStyle=t.colors.wood2,t.ctx.fillRect(this.outerBox.left,this.getY(t),this.outerBox.width,t.platform.height)}draw(t){const e=this.x-t.state.pos.x,r=a(t,600,e),n=a(t,680,e),o=r.left>n.left;this.infront=n.left>n.right;for(let e of["left","right"]){let s="left"===e?n.unit:6*n.unit,a={top:{left:new u(n.left+s,this.getY(t)+t.platform.height),right:new u(n.left+n.unit+s,this.getY(t)+t.platform.height)},bottom:{left:new u(r.left+s,this.getY(t)+70),right:new u(r.left+r.unit+s,this.getY(t)+70)}},c={top:{left:new u(n.left+s,this.getY(t)+(t.platform.height-10)),right:new u(n.left+n.unit+s,this.getY(t)+(t.platform.height-10))},bottom:{left:new u(r.left+s,this.getY(t)+60),right:new u(r.left+r.unit+s,this.getY(t)+60)}};i(t,t.colors.wood3,c.top.left,c.bottom.left,c.bottom.right,c.top.right),i(t,t.colors.wood4,a.top.left,a.bottom.left,a.bottom.right,a.top.right),o?i(t,t.colors.wood5,c.top.left,a.top.left,a.bottom.left,c.bottom.left):i(t,t.colors.wood5,c.top.right,a.top.right,a.bottom.right,c.bottom.right)}t.ctx.fillStyle=t.colors.wood1,o?t.ctx.fillRect(r.left,this.getY(t),n.left-r.left,t.platform.height):t.ctx.fillRect(n.right,this.getY(t),r.left-n.left,t.platform.height),this.outerBox=n}}function p(t,e,r,n,o,i){const s=t.createLinearGradient(e,0,e+r,0);s.addColorStop(0,o),s.addColorStop(1,i),t.fillStyle=s,t.fillRect(e,0,r,n)}class f{constructor(t,e){this.width=t,this.height=e;let r=document.createElement("canvas");r.width=t,r.height=e,this.ctx=r.getContext("2d"),this.canvas=r}}function h(t,e){e&&(t.state.activePlatforms=[]),t.platforms.forEach((r=>{r.x<t.state.pos.x-40||r.x>t.state.pos.x+220||(e?r.isInFront(t)&&(r.draw(t),t.state.activePlatforms.push(r)):r.isInFront(t)||r.draw(t))}));for(let e=0;e<t.state.activePlatforms.length;e++)t.state.activePlatforms[e].drawFront(t)}function d(t,e,r){37===e.keyCode&&(t.input.left=r),39===e.keyCode&&(t.input.right=r),32===e.keyCode&&(t.input.jump=r)}function y(t,e,r){const n=new f(t.tower.width,e);t.brick.padding;let o=t.brick.padding,i={x:0,y:0},a=t.brick.width;const u=t.brick.width;let c=!0;const l=n.ctx.createLinearGradient(0,0,n.canvas.width,e);l.addColorStop(0,"black"),l.addColorStop(.35,"#353637"),l.addColorStop(.65,"#353637"),l.addColorStop(1,"black"),n.ctx.fillStyle=l,n.ctx.fillRect(0,0,n.canvas.width,n.canvas.height);for(let e=0;e<2;e++){for(let e=180+r;e<=360;e+=u)i=s(600,600,e),c&&(e+=u/2,c=!1),a=s(600,600,e+u),n.ctx.fillStyle=t.brick.color,n.ctx.fillRect(i,o,a-i-t.brick.padding,t.brick.height),n.ctx.fillStyle=t.brick.shade,n.ctx.fillRect(i,o,a-i-t.brick.padding,3);o+=t.brick.padding,o+=t.brick.height}return n.canvas}var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.InjectionToken=void 0;v.InjectionToken=class{constructor(t){this.injectionIdentifier=t}toString(){return this.injectionIdentifier}};var g,m={},w=m&&m.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),b=m&&m.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||w(e,t,r)};Object.defineProperty(m,"__esModule",{value:!0}),o.register("4hU38",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.Injectable=void 0;var r=o("eL9SZ");t.exports.Injectable=function(){return function(t){return Reflect.defineMetadata(r.INJECTABLE_METADATA_KEY,!0,t),t}}})),o.register("eL9SZ",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.isInjectable=t.exports.INJECTABLE_METADATA_KEY=void 0,o("3XTdd"),t.exports.INJECTABLE_METADATA_KEY=Symbol("INJECTABLE_KEY"),t.exports.isInjectable=function(e){return!0===Reflect.getMetadata(t.exports.INJECTABLE_METADATA_KEY,e)}})),o.register("3XTdd",(function(t,r){var n,i=o("d6KlF");
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */!function(t){!function(r){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(t);function s(t,e){return function(r,n){"function"!=typeof t[r]&&Object.defineProperty(t,r,{configurable:!0,writable:!0,value:n}),e&&e(r,n)}}void 0===n.Reflect?n.Reflect=t:o=s(n.Reflect,o),function(t){var e=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,u=!s&&!a,c={create:s?function(){return ot(Object.create(null))}:a?function(){return ot({__proto__:null})}:function(){return ot({})},has:u?function(t,r){return e.call(t,r)}:function(t,e){return e in t},get:u?function(t,r){return e.call(t,r)?t[r]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),p="object"==typeof i&&i.env&&!1,f=p||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?et():Map,h=p||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?rt():Set,d=new(p||"function"!=typeof WeakMap?nt():WeakMap);function y(t,e,r,n){if(L(r)){if(!$(t))throw new TypeError;if(!V(e))throw new TypeError;return k(t,e)}if(!$(t))throw new TypeError;if(!B(e))throw new TypeError;if(!B(n)&&!L(n)&&!U(n))throw new TypeError;return U(n)&&(n=void 0),E(t,e,r=J(r),n)}function v(t,e){function r(r,n){if(!B(r))throw new TypeError;if(!L(n)&&!K(n))throw new TypeError;R(t,e,r,n)}return r}function g(t,e,r,n){if(!B(r))throw new TypeError;return L(n)||(n=J(n)),R(t,e,r,n)}function m(t,e,r){if(!B(e))throw new TypeError;return L(r)||(r=J(r)),T(t,e,r)}function w(t,e,r){if(!B(e))throw new TypeError;return L(r)||(r=J(r)),I(t,e,r)}function b(t,e,r){if(!B(e))throw new TypeError;return L(r)||(r=J(r)),A(t,e,r)}function x(t,e,r){if(!B(e))throw new TypeError;return L(r)||(r=J(r)),C(t,e,r)}function _(t,e){if(!B(t))throw new TypeError;return L(e)||(e=J(e)),O(t,e)}function j(t,e){if(!B(t))throw new TypeError;return L(e)||(e=J(e)),M(t,e)}function S(t,e,r){if(!B(e))throw new TypeError;L(r)||(r=J(r));var n=P(e,r,!1);if(L(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var o=d.get(e);return o.delete(r),o.size>0||d.delete(e),!0}function k(t,e){for(var r=t.length-1;r>=0;--r){var n=(0,t[r])(e);if(!L(n)&&!U(n)){if(!V(n))throw new TypeError;e=n}}return e}function E(t,e,r,n){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,r,n);if(!L(i)&&!U(i)){if(!B(i))throw new TypeError;n=i}}return n}function P(t,e,r){var n=d.get(t);if(L(n)){if(!r)return;n=new f,d.set(t,n)}var o=n.get(e);if(L(o)){if(!r)return;o=new f,n.set(e,o)}return o}function T(t,e,r){if(I(t,e,r))return!0;var n=tt(e);return!U(n)&&T(t,n,r)}function I(t,e,r){var n=P(e,r,!1);return!L(n)&&W(n.has(t))}function A(t,e,r){if(I(t,e,r))return C(t,e,r);var n=tt(e);return U(n)?void 0:A(t,n,r)}function C(t,e,r){var n=P(e,r,!1);if(!L(n))return n.get(t)}function R(t,e,r,n){P(r,n,!0).set(t,e)}function O(t,e){var r=M(t,e),n=tt(t);if(null===n)return r;var o=O(n,e);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new h,s=[],a=0,u=r;a<u.length;a++){var c=u[a];i.has(c)||(i.add(c),s.push(c))}for(var l=0,p=o;l<p.length;l++){c=p[l];i.has(c)||(i.add(c),s.push(c))}return s}function M(t,e){var r=[],n=P(t,e,!1);if(L(n))return r;for(var o=z(n.keys()),i=0;;){var s=Z(o);if(!s)return r.length=i,r;var a=G(s);try{r[i]=a}catch(t){try{Q(o)}finally{throw t}}i++}}function F(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function L(t){return void 0===t}function U(t){return null===t}function N(t){return"symbol"==typeof t}function B(t){return"object"==typeof t?null!==t:"function"==typeof t}function H(t,e){switch(F(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var r=3===e?"string":5===e?"number":"default",o=X(t,n);if(void 0!==o){var i=o.call(t,r);if(B(i))throw new TypeError;return i}return D(t,"default"===r?"number":r)}function D(t,e){if("string"===e){var r=t.toString;if(q(r))if(!B(o=r.call(t)))return o;if(q(n=t.valueOf))if(!B(o=n.call(t)))return o}else{var n;if(q(n=t.valueOf))if(!B(o=n.call(t)))return o;var o,i=t.toString;if(q(i))if(!B(o=i.call(t)))return o}throw new TypeError}function W(t){return!!t}function Y(t){return""+t}function J(t){var e=H(t,3);return N(e)?e:Y(e)}function $(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function q(t){return"function"==typeof t}function V(t){return"function"==typeof t}function K(t){switch(F(t)){case 3:case 4:return!0;default:return!1}}function X(t,e){var r=t[e];if(null!=r){if(!q(r))throw new TypeError;return r}}function z(t){var e=X(t,o);if(!q(e))throw new TypeError;var r=e.call(t);if(!B(r))throw new TypeError;return r}function G(t){return t.value}function Z(t){var e=t.next();return!e.done&&e}function Q(t){var e=t.return;e&&e.call(t)}function tt(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var r=t.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return e;var o=n.constructor;return"function"!=typeof o||o===t?e:o}function et(){var t={},e=[],r=function(){function t(t,e,r){this._index=0,this._keys=t,this._values=e,this._selector=r}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var r=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();function n(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var r=this._find(t,!0);return this._values[r]=e,this},e.prototype.delete=function(e){var r=this._find(e,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new r(this._keys,this._values,n)},e.prototype.values=function(){return new r(this._keys,this._values,i)},e.prototype.entries=function(){return new r(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}()}function rt(){return function(){function t(){this._map=new f}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function nt(){var t=16,r=c.create(),n=o();function o(){var t;do{t="@@WeakMap@@"+u()}while(c.has(r,t));return r[t]=!0,t}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:c.create()})}return t[n]}function s(t,e){for(var r=0;r<e;++r)t[r]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function u(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var r="",n=0;n<t;++n){var o=e[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}()}function ot(t){return t.__=void 0,delete t.__,t}t("decorate",y),t("metadata",v),t("defineMetadata",g),t("hasMetadata",m),t("hasOwnMetadata",w),t("getMetadata",b),t("getOwnMetadata",x),t("getMetadataKeys",_),t("getOwnMetadataKeys",j),t("deleteMetadata",S)}(o)}()}(n||(n={}))})),o.register("d6KlF",(function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,p=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):p=-1,c.length&&h())}function h(){if(!l){var t=a(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++p<e;)u&&u[p].run();p=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}})),b(o("4hU38"),m),o.register("1P4GI",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.Inject=void 0;var r=o("9ReE3");t.exports.Inject=function(t){return function(e,n,o){return Reflect.defineMetadata(r.INJECT_METADATA_KEY,t,e,`index-${o}`),e}}})),o.register("9ReE3",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.getInjectionToken=t.exports.INJECT_METADATA_KEY=void 0,o("3XTdd"),t.exports.INJECT_METADATA_KEY=Symbol("INJECT_KEY"),t.exports.getInjectionToken=function(e,r){return Reflect.getMetadata(t.exports.INJECT_METADATA_KEY,e,`index-${r}`)}})),b(o("1P4GI"),m),o.register("h2a8J",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.Injector=void 0;var r=o("ffMrg"),n=o("9ReE3"),i=o("j2Jup"),s=o("eL9SZ");class a{constructor(t){this.providers=new Map,t.forEach((t=>{this.assertInjectableIfClassProvider(t),this.providers.set(t.provide,t)}))}addProvider(t){this.assertInjectableIfClassProvider(t),this.providers.set(t.provide,t)}static create(t){return a.instance||(a.instance=new a(t)),a.instance}assertInjectableIfClassProvider(t){if(console.log((0,r.isClassProvider)(t)&&!(0,s.isInjectable)(t.useClass)),(0,r.isClassProvider)(t)&&!(0,s.isInjectable)(t.useClass))throw new Error(`Cannot provide ${this.getTokenName(t.provide)} using class ${this.getTokenName(t.useClass)}, ${this.getTokenName(t.useClass)} isn't injectable`)}getTokenName(t){return t instanceof v.InjectionToken?t.toString():t.name}get(t){const e=this.providers.get(t);return this.injectWithProvider(t,e)}injectWithProvider(t,e){if(void 0===e)throw new Error(`No provider for type ${this.getTokenName(t)}`);return(0,r.isClassProvider)(e)?this.injectClass(e):(0,r.isValueProvider)(e)?this.injectValue(e):this.injectFactory(e,e.deps)}injectValue(t){return t.useValue}injectFactory(t,e=[]){return t.useFactory(...e.map((t=>this.get(t))))}injectClass(t){const e=t.useClass,r=this.getInjectedParams(e);return Reflect.construct(e,r)}getInjectedParams(t){const e=Reflect.getMetadata(i.REFLECT_PARAMS,t);return void 0===e?[]:e.map(((e,r)=>{if(void 0===e)throw new Error(`Injection error. Recursive dependency detected in constructor for type ${t.name} with parameter at index ${r}`);const o=(0,n.getInjectionToken)(t,r),i=void 0===o?e:o,s=this.providers.get(i);return this.injectWithProvider(i,s)}))}}t.exports.Injector=a})),o.register("ffMrg",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.isFactoryProvider=t.exports.isValueProvider=t.exports.isClassProvider=void 0,t.exports.isClassProvider=function(t){return void 0!==t.useClass},t.exports.isValueProvider=function(t){return void 0!==t.useValue},t.exports.isFactoryProvider=function(t){return void 0!==t.useFactory}})),o.register("j2Jup",(function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.REFLECT_PARAMS=void 0,t.exports.REFLECT_PARAMS="design:paramtypes"})),b(o("h2a8J"),m);let x=g=m.Injectable()(g=class{add(t,e){this._audio.set(t,new Audio(e.pathname))}get(t){return this._audio.get(t)}constructor(){this._audio=new Map([])}})||g;new v.InjectionToken("player-state");const _=new v.InjectionToken("audio"),j=m.Injector.create([{provide:_,useClass:x}]).get(_);var S;o.register("kPq84",(function(e,r){var n;t(e.exports,"getBundleURL",(()=>n),(t=>n=t));var o={};function i(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return i(t[2])}return"/"}(),o[t]=e),e}})),S=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("hts9X"),j.add("timeWavePassBy4",new URL(S));var k;k=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("mZqOX"),j.add("timeWaveRipple2",new URL(k));var E;E=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("2Y9IQ"),j.add("thunder",new URL(E));var P;P=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("2vBSq"),j.add("yeaah",new URL(P));var T;T=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("dDxAQ"),j.add("scream",new URL(T));var I;I=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("bcCjA"),j.add("running",new URL(I));var A;A=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("ctoNW"),j.add("jumpSpringUp",new URL(A));var C;function R(t,e,r,n,o,i){return i&&(t.ctx.fillStyle=i,t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height)),t.ctx.fillStyle=e,t.ctx.beginPath(),t.ctx.moveTo(r,90),t.ctx.lineTo(r,90+o),t.ctx.lineTo(r+n,90+o),t.ctx.lineTo(r+n,90),t.ctx.ellipse(r+n/2,90,n/2,90,0,0,Math.PI,!0),t.ctx.fill(),t.canvas}C=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("kcC6D"),j.add("jumpSpringDown",new URL(C));class O{constructor(t,e){this.x=t,this.y=e,this.x=t,this.y=e}draw(t){const e=this.x-t.state.pos.x,r=s(600,800,e-t.platform.width/2),n=s(600,800,e+t.platform.width/2);if(r>n){const o=s(560,800,e-t.platform.width/2),i=s(560,800,e+t.platform.width/2),a=new f(1600,250),u=R(new f(1600,250),"#2A3849",i,o-i,250,"#262525"),c=R(a,t.ctx.createPattern(u,"no-repeat"),n,r-n,250);t.ctx.drawImage(c,0,this.y+t.state.pos.y)}}}function M(t,e){t.lastPlatform&&e.n>t.lastPlatform.n&&(t.lastPlatform=e,t.points+=10*e.n,console.log(e.n))}function F(t,e,r,n,o){let i=new f(317,300),s=new Image;return s.onload=function(){o&&(i.ctx.save(),i.ctx.scale(-1,1)),i.ctx.drawImage(s,0,0,317*(o?-1:1),300),o&&i.ctx.restore(),t.animationFrames[r][n]=i.canvas},s.src=e,i.canvas}const L={easy:{min:30,max:40},medium:{min:20,max:45},hard:{min:15,max:58}};function U(t){t.rect=t.container.getBoundingClientRect(),t.canvas.height,window.innerHeight}const N={platforms:[],doors:[new O(1600,350),new O(1205,-1160)],savedState:null,state:{paused:!1,finished:!1,points:0,lastPlatform:null,platformReached:null,titles:{opacity:0,ready:!1,text:"Não foi desta vez"},climbstarted:!1,time:null,dt:null,climbspeed:{normal:.05,fast:.12},pos:{x:1510,y:0},lastPos:{x:1510,y:0},activePlatforms:[],jump:{isGrounded:!0,isJumping:!1,isBoosting:!1,speed:0,nextY:0},player:{dir:1,x:725,y:350,prevY:350,speed:0,animationFrame:0,animationFrameCount:0}}};const B={brick:{shine:"",shade:"rgba(256, 256, 256, 0.8)",color:"#7C747D",width:16,height:48,padding:4},platform:{height:22,width:13,color:"#5A4142"},tower:{width:1200,shadowWidth:130,skyWidth:200},sky:{bg:"rgb(10, 10, 10)",starSizes:[2,3,4,5],starColors:["#1E728C","#98ECFF","#7AEFFF","#FFF385"]},settings:{maxSpeed:.09,minSpeed:.01,friction:.7,acceleration:.02,jump:{gravity:{boost:.0014,normal:.003,down:.004},maxSpeed:.6,fallStartSpeed:.07,friction:.98}},colors:{bg:"#FBD0D0",wood1:"#B5754C",wood2:"#CB946D",wood3:"#4B3937",wood4:"#EB9A67",wood5:"#B46736"},storage:{bricks:null,sky:null,shadows:null},input:{left:!1,right:!1,jump:!1}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H=function(t,e){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function W(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function Y(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i}Object.create;function J(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function q(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function V(t){return this instanceof V?(this.v=t,this):new V(t)}function K(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];function s(t){o[t]&&(n[t]=function(e){return new Promise((function(r,n){i.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=o[t](e)).value instanceof V?Promise.resolve(r.value.v).then(u,c):l(i[0][2],r)}catch(t){l(i[0][3],t)}var r}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n}function X(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}return r?r.call(t):(t=J(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e)}Object.create;function z(t){return"function"==typeof t}function G(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Z=G((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Q(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var tt=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=J(i),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else i.remove(this);var u=this.initialTeardown;if(z(u))try{u()}catch(t){o=t instanceof Z?t.errors:[t]}var c=this._teardowns;if(c){this._teardowns=null;try{for(var l=J(c),p=l.next();!p.done;p=l.next()){var f=p.value;try{nt(f)}catch(t){o=null!=o?o:[],t instanceof Z?o=q(q([],$(o)),$(t.errors)):o.push(t)}}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(o)throw new Z(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)nt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Q(e,t)},t.prototype.remove=function(e){var r=this._teardowns;r&&Q(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),et=tt.EMPTY;function rt(t){return t instanceof tt||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function nt(t){z(t)?t():t.unsubscribe()}var ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},it={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=it.delegate;return((null==r?void 0:r.setTimeout)||setTimeout).apply(void 0,q([],$(t)))},clearTimeout:function(t){var e=it.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function st(t){it.setTimeout((function(){var e=ot.onUnhandledError;if(!e)throw t;e(t)}))}function at(){}var ut=ct("C",void 0,void 0);function ct(t,e,r){return{kind:t,value:e,error:r}}var lt=null;function pt(t){if(ot.useDeprecatedSynchronousErrorHandling){var e=!lt;if(e&&(lt={errorThrown:!1,error:null}),t(),e){var r=lt,n=r.errorThrown,o=r.error;if(lt=null,n)throw o}}else t()}function ft(t){ot.useDeprecatedSynchronousErrorHandling&&lt&&(lt.errorThrown=!0,lt.error=t)}var ht=function(t){function e(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,rt(e)&&e.add(r)):r.destination=mt,r}return D(e,t),e.create=function(t,e,r){return new dt(t,e,r)},e.prototype.next=function(t){this.isStopped?gt(function(t){return ct("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?gt(ct("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?gt(ut,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(tt),dt=function(t){function e(e,r,n){var o,i=t.call(this)||this;if(z(e))o=e;else if(e){var s;o=e.next,r=e.error,n=e.complete,i&&ot.useDeprecatedNextContext?(s=Object.create(e)).unsubscribe=function(){return i.unsubscribe()}:s=e,o=null==o?void 0:o.bind(s),r=null==r?void 0:r.bind(s),n=null==n?void 0:n.bind(s)}return i.destination={next:o?yt(o,i):at,error:yt(null!=r?r:vt,i),complete:n?yt(n,i):at},i}return D(e,t),e}(ht);function yt(t,e){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{t.apply(void 0,q([],$(e)))}catch(t){ot.useDeprecatedSynchronousErrorHandling?ft(t):st(t)}}}function vt(t){throw t}function gt(t,e){var r=ot.onStoppedNotification;r&&it.setTimeout((function(){return r(t,e)}))}var mt={closed:!0,next:at,error:vt,complete:at},wt="function"==typeof Symbol&&Symbol.observable||"@@observable";function bt(t){return t}function xt(t){return 0===t.length?bt:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var _t=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,o=this,i=(n=t)&&n instanceof ht||function(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}(n)&&rt(n)?t:new dt(t,e,r);return pt((function(){var t=o,e=t.operator,r=t.source;i.add(e?e.call(i,r):r?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=jt(e))((function(e,n){var o=new dt({next:function(e){try{t(e)}catch(t){n(t),o.unsubscribe()}},error:n,complete:e});r.subscribe(o)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[wt]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xt(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=jt(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function jt(t){var e;return null!==(e=null!=t?t:ot.Promise)&&void 0!==e?e:Promise}var St=G((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),kt=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return D(e,t),e.prototype.lift=function(t){var e=new Et(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new St},e.prototype.next=function(t){var e=this;pt((function(){var r,n;if(e._throwIfClosed(),!e.isStopped){var o=e.observers.slice();try{for(var i=J(o),s=i.next();!s.done;s=i.next()){s.value.next(t)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}))},e.prototype.error=function(t){var e=this;pt((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var r=e.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;pt((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,r=e.hasError,n=e.isStopped,o=e.observers;return r||n?et:(o.push(t),new tt((function(){return Q(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,o=e.isStopped;r?t.error(n):o&&t.complete()},e.prototype.asObservable=function(){var t=new _t;return t.source=this,t},e.create=function(t,e){return new Et(t,e)},e}(_t),Et=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return D(e,t),e.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},e.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:et},e}(kt),Pt=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return D(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){var t=this,e=t.hasError,r=t.thrownError,n=t._value;if(e)throw r;return this._throwIfClosed(),n},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(kt),Tt=function(t){function e(e,r){return t.call(this)||this}return D(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(tt),It={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=It.delegate;return((null==r?void 0:r.setInterval)||setInterval).apply(void 0,q([],$(t)))},clearInterval:function(t){var e=It.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},At=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return D(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),It.setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return e;It.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r,n=!1;try{this.work(t)}catch(t){n=!0,r=t||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Q(n,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Tt),Ct={now:function(){return(Ct.delegate||Date).now()},delegate:void 0},Rt=function(){function t(e,r){void 0===r&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},t.now=Ct.now,t}(),Ot=new(function(t){function e(e,r){void 0===r&&(r=Rt.now);var n=t.call(this,e,r)||this;return n.actions=[],n._active=!1,n._scheduled=void 0,n}return D(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(Rt))(At),Mt=Ot;function Ft(t,e,r){void 0===t&&(t=0),void 0===r&&(r=Mt);var n,o=-1;return null!=e&&((n=e)&&z(n.schedule)?r=e:o=e),new _t((function(e){var n=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-r.now():t;n<0&&(n=0);var i=0;return r.schedule((function(){e.closed||(e.next(i++),0<=o?this.schedule(void 0,o):e.complete())}),n)}))}function Lt(t,e){return void 0===t&&(t=0),void 0===e&&(e=Ot),t<0&&(t=0),Ft(t,t,e)}function Ut(t){return function(e){if(function(t){return z(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var Nt=function(t){function e(e,r,n,o,i){var s=t.call(this,e)||this;return s.onFinalize=i,s._next=r?function(t){try{r(t)}catch(t){e.error(t)}}:t.prototype._next,s._error=o?function(t){try{o(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=n?function(){try{n()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return D(e,t),e.prototype.unsubscribe=function(){var e,r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(e=this.onFinalize)||void 0===e||e.call(this))},e}(ht);function Bt(t,e){return Ut((function(r,n){var o=0;r.subscribe(new Nt(n,(function(r){n.next(t.call(e,r,o++))})))}))}var Ht="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Dt(t){if(t instanceof _t)return t;if(null!=t){if(function(t){return z(t[wt])}(t))return s=t,new _t((function(t){var e=s[wt]();if(z(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if((i=t)&&"number"==typeof i.length&&"function"!=typeof i)return o=t,new _t((function(t){for(var e=0;e<o.length&&!t.closed;e++)t.next(o[e]);t.complete()}));if(z(null==(n=t)?void 0:n.then))return r=t,new _t((function(t){r.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,st)}));if(function(t){return Symbol.asyncIterator&&z(null==t?void 0:t[Symbol.asyncIterator])}(t))return Wt(t);if(function(t){return z(null==t?void 0:t[Ht])}(t))return e=t,new _t((function(t){var r,n;try{for(var o=J(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()}));if(function(t){return z(null==t?void 0:t.getReader)}(t))return Wt(function(t){return K(this,arguments,(function(){var e,r,n;return Y(this,(function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,V(e.read())];case 3:return r=o.sent(),n=r.value,r.done?[4,V(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,V(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}(t))}var e,r,n,o,i,s;throw function(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(t)}function Wt(t){return new _t((function(e){(function(t,e){var r,n,o,i;return W(this,void 0,void 0,(function(){var s,a;return Y(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=X(t),u.label=1;case 1:return[4,r.next()];case 2:if((n=u.sent()).done)return[3,4];if(s=n.value,e.next(s),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),o={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Yt(t,e){return void 0===e&&(e=bt),t=null!=t?t:Jt,Ut((function(r,n){var o,i=!0;r.subscribe(new Nt(n,(function(r){var s=e(r);!i&&t(o,s)||(i=!1,o=s,n.next(r))})))}))}function Jt(t,e){return t===e}class $t{get state(){return this.state$.getValue()}constructor(t){this.state$=new Pt(t)}select(t){return this.state$.asObservable().pipe(Bt((e=>t(e))),Yt())}setState(t){this.state$.next({...this.state,...t})}}const qt=new class{_getArrow(t){switch(t){case"ArrowLeft":return"left";case"ArrowRight":return"right";case"ArrowUp":return"up";case"ArrowDown":return"down"}}_inArrows(t){return this._arrows.includes(t)}_isSpace(t){return" "===t}_getKey(t){return t.toLowerCase()}_getState(t){return this._inArrows(t)?this._getArrow(t):this._isSpace(t)?"space":this._getKey(t)}initialize(){window.addEventListener("keydown",this._setState),window.addEventListener("keyup",this._setState)}stop(){window.removeEventListener("keydown",this._setState),window.removeEventListener("keyup",this._setState)}constructor(){this.state=new Pt(null),this.state$=this.state.asObservable().pipe(Yt(((t,e)=>t===e))),this._arrows=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],this._setState=t=>{this.state.next(this._getState(t.key))}}};const Vt=new class extends $t{boost(){this.setState({boosting:!0})}jumpUp(){this.setState({jumping:!0,boosting:!0,grounded:!1})}jumpDown(){this.setState({jumping:!1,boosting:!1})}setSpeed(t){this.setState({speed:t})}setPlatform(t){this.setState({platform:t})}run(){this.setState({running:!0})}idle(){this.setState({running:!1})}pause(){this.setState({paused:!0})}resume(){this.setState({paused:!1})}toTurn(t){this.setState({dir:t})}get grounded(){return this.state.grounded}get boosting(){return this.state.boosting}get jumping(){return this.state.jumping}get running(){return this.state.running}get paused(){return this.state.paused}get platform(){return this.state.platform}get speed(){return this.state.speed}get pos(){return this.state.pos}get dir(){return this.state.dir}constructor(...t){super(...t),this.grounded$=this.select((t=>t.grounded)),this.boosting$=this.select((t=>t.boosting)),this.jumping$=this.select((t=>t.jumping)),this.running$=this.select((t=>t.running)),this.platform$=this.select((t=>t.platform)),this.paused$=this.select((t=>t.paused)),this.dir$=this.select((t=>t.dir)),this.pos$=this.select((t=>t.pos)),this.speed$=this.select((t=>t.speed))}}({grounded:!1,boosting:!1,jumping:!1,running:!1,paused:!1,platform:0,dir:1,pos:new u(0,0),speed:0});function Kt(t){return document.querySelector(`#${t}`)}const Xt={jump:Kt("jump"),left:Kt("left"),right:Kt("right")},zt=document.querySelector("form"),Gt=zt.elements.namedItem("points"),Zt=zt.elements.namedItem("seconds"),Qt=document.querySelector("#container"),te=document.querySelector("canvas"),ee=new f(10,10).canvas,re=function(t={}){return{...B,...t}}(),ne=function(t=function(){return document.createElement("div")}(),e=function(){return document.createElement("canvas")}(),r=function(){return new f(10,10).canvas}()){const n=e.getContext("2d"),o=t.getBoundingClientRect();return{container:t,canvas:e,ctx:n,rect:o,animationFrames:{standing:[r,r],jumpingUp:[r,r],jumpingDown:[r,r],runningLeft:[r,r,r,r],runningRight:[r,r,r,r]}}}(Qt,te,ee),oe=j.get("jumpSpringDown"),ie=j.get("jumpSpringUp"),se=j.get("timeWaveRipple2"),ae=j.get("running"),ue=j.get("thunder"),ce=j.get("scream"),le=location.hash.substring(1),pe=(he=fe=le,Object.keys(L).includes(he)?L[fe]:L.easy);var fe,he;const de=(pe.min+pe.max)/2|0,ye="hard"===le?[{x:1600,y:600},{x:1566,y:576},{x:1511,y:579},{x:1479,y:520},{x:1444,y:430},{x:1427,y:344},{x:1371,y:270},{x:1341,y:223},{x:1306,y:153},{x:1272,y:112},{x:1218,y:85},{x:1163,y:72},{x:1107,y:28},{x:1072,y:-47},{x:1016,y:-134},{x:974,y:-228},{x:918,y:-277},{x:874,y:-359},{x:853,y:-381},{x:806,y:-383},{x:749,y:-413},{x:709,y:-447},{x:654,y:-499},{x:623,y:-523},{x:571,y:-615},{x:529,y:-661},{x:502,y:-726},{x:464,y:-811},{x:419,y:-834},{x:393,y:-923},{x:354,y:-958},{x:304,y:-1001},{x:249,y:-1096},{x:226,y:-1132},{x:182,y:-1191},{x:144,y:-1280}]:function(t,e=80){let r=0,n=0;const o=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;return new Array(e).fill({x:r,y:n}).map(((e,i)=>(r=0===r?1600:o(r-t.min,r-t.max),n=0===n?600:o(n-(t.min-20),n-(2*t.max-20)),{x:r,y:n})))}(pe,de),ve=ye.map((({x:t,y:e})=>new l(t,e)));var ge;ge=ye,window.positions=ge;const me=[new O(1600,350)],we=ye.pop();we&&me.push(new O(we.x,we.y-250));const be={...re,...ne,...function(t={}){return{...N,...t}}({doors:me})};be.platforms.push(...ve),onpopstate=t=>location.reload();let xe=!1;function _e(){xe=!0,ce.play(),se.play(),setTimeout((()=>{location.reload()}),2500)}const je=new class{start(t=60){return this._timeKeeper(t)}reset(t=60){return this._timeKeeper(t)}_timeKeeper(t=60){const e=Lt(1e3),r=Ft(1e3*t);return e.pipe((n=r,Ut((function(t,e){Dt(n).subscribe(new Nt(e,(function(){return e.complete()}),at)),!e.closed&&t.subscribe(e)}))),Bt((e=>t-e)));var n}},Se=je.start(30);function ke(){const t=document.timeline.currentTime??0;var e;be.state.dt=t-(be.state.time||t),be.state.time=t,be.state.paused||function(){be.input.left?be.state.player.speed+=be.settings.acceleration:be.input.right?be.state.player.speed-=be.settings.acceleration:0!==be.state.player.speed&&(be.state.player.speed*=be.state.jump.isJumping?be.settings.jump.friction:be.settings.friction);Math.abs(be.state.player.speed)>be.settings.maxSpeed?be.state.player.speed=be.state.player.speed>0?be.settings.maxSpeed:-1*be.settings.maxSpeed:Math.abs(be.state.player.speed)<be.settings.minSpeed&&(Vt.idle(),Vt.setSpeed(0),be.state.player.speed=0);if(0!==be.state.player.speed){be.state.jump.isJumping||Vt.run();const t=be.state.jump.isJumping?.7*be.state.player.speed:be.state.player.speed;Vt.setSpeed(t),be.state.pos.x+=be.state.player.speed<0?Math.ceil(t*be.state.dt):Math.floor(t*be.state.dt);const e=t>0?0:1;Vt.toTurn(e),be.state.player.dir=e}!be.state.climbstarted&&be.input.jump&&(be.state.climbstarted=!0);if((be.input.jump||be.state.jump.isJumping)&&(be.state.jump.isGrounded&&(Vt.jumpUp(),Vt.idle(),be.state.jump.isGrounded=!1,be.state.jump.isJumping=!0,be.state.jump.isBoosting=!0,be.state.jump.speed=be.settings.jump.maxSpeed),be.state.jump.isJumping)){const t=be.state.jump.speed>0,e=be.state.dt<30?30-be.state.dt:0;!t&&be.state.jump.isBoosting&&(be.state.jump.isBoosting=!1),be.state.player.prevY=be.state.player.y,be.state.player.y-=be.state.jump.speed*be.state.dt,be.state.jump.speed-=(be.settings.jump.gravity[t?be.state.jump.isBoosting?"boost":"normal":"down"]-2e-5*e)*be.state.dt}be.state.jump.isBoosting&&!be.input.jump&&(be.state.jump.isBoosting=!1);be.state.climbstarted&&be.state.pos.y<1440&&(be.state.pos.y+=(be.state.player.y+be.state.pos.y<250?be.state.climbspeed.fast:be.state.climbspeed.normal)*be.state.dt);(function(){if(be.state.jump.isJumping&&be.state.jump.speed<0)for(let t=0;t<be.state.activePlatforms.length;t++){const e=be.state.activePlatforms[t];if(Math.abs(e.x-(be.state.pos.x+90))<10){const t=be.state.player.y+250,r=be.state.player.prevY+250;t>e.y&&r<e.y&&(Vt.setPlatform(e.n),Vt.jumpDown(),Vt.idle(),M(be.state,e),Gt.value=(0|be.state.points).toString(),be.state.player.y=e.y-250,be.state.jump.isGrounded=!0,be.state.jump.isJumping=!1,be.state.jump.isBoosting=!1,be.state.jump.speed=0)}}else if(be.state.jump.isGrounded){let t=!1;for(let e=0;e<be.state.activePlatforms.length;e++){let r=be.state.activePlatforms[e];if(Math.abs(r.x-(be.state.pos.x+90))<10&&r.y-(be.state.player.y+250)==0){t=!0;break}}t||(Vt.jumpUp(),be.state.jump.isGrounded=!1,be.state.jump.isJumping=!0,be.state.jump.isBoosting=!0,be.state.jump.speed=be.settings.jump.fallStartSpeed)}else be.doors.forEach((t=>function(t,e){Math.abs(e.x-(t.state.pos.x+40))<10&&(t.state.finished||(j.get("yeaah")?.play(),t.state.finished=!0))}(be,t)))})(),be.state.player.y+be.state.pos.y>900&&(console.log(be.state.player.y+be.state.pos.y),Vt.pause(),Vt.idle(),be.state.paused=!0)}(),be.state.lastPlatform||(be.state.lastPlatform=be.platforms[0],xe=!1),be.state.paused||100===be.state.titles.opacity||(function(t){if(null==t.storage.sky){const e=t.canvas.height,r=new f(t.canvas.width,e);r.ctx.fillStyle=t.sky.bg,r.ctx.fillRect(0,0,t.canvas.width,e);for(let n=0;n<150;n++){const n=Math.floor(Math.random()*t.sky.starSizes.length);r.ctx.fillStyle=t.sky.starColors[n],r.ctx.beginPath(),r.ctx.arc(Math.floor(Math.random()*t.canvas.width),Math.floor(Math.random()*e),t.sky.starSizes[n],0,2*Math.PI),r.ctx.fill()}t.storage.sky=r.canvas}else{const e=(t.state.pos.x-2e3)%200*-8,r=t.state.pos.y%t.canvas.height;t.ctx.drawImage(t.storage.sky,e,r),t.ctx.drawImage(t.storage.sky,e-t.canvas.width,r),t.ctx.drawImage(t.storage.sky,e,r-t.canvas.height),t.ctx.drawImage(t.storage.sky,e-t.canvas.width,r-t.canvas.height)}}(be),h(be,!1),function(t){const e=2*t.brick.height+2*t.brick.padding;if(!t.storage.bricks){t.storage.bricks={};for(let r=0;r<16;r++)t.storage.bricks["brick"+r]=y(t,e,r)}for(let r=-1;r<12;r++)t.ctx.drawImage(t.storage.bricks["brick"+t.state.pos.x%t.brick.width],t.tower.skyWidth,e*r+t.state.pos.y%e)}(be),(e=be).doors.forEach((t=>{t.x<e.state.pos.x-40||t.x>e.state.pos.x+220||t.draw(e)})),function(t){if(t.storage.shadows)t.ctx.drawImage(t.storage.shadows,t.tower.skyWidth,0);else{const e=new f(t.tower.width,t.canvas.height);p(e.ctx,0,t.tower.shadowWidth+80,t.canvas.height,"#666666","transparent"),p(e.ctx,0,t.tower.shadowWidth,t.canvas.height,"rgb(10, 10, 10)","transparent"),p(e.ctx,e.canvas.width-(t.tower.shadowWidth+80),t.tower.shadowWidth+80,t.canvas.height,"transparent","#666666"),p(e.ctx,e.canvas.width-t.tower.shadowWidth,t.tower.shadowWidth,t.canvas.height,"transparent","rgb(10, 10, 10)"),t.storage.shadows=e.canvas}}(be),h(be,!0),function(t){const e=t.state.player.y+t.state.pos.y-48,r=t.state.player.x-(t.state.player.dir?120:80);t.state.jump.isJumping?t.state.jump.speed>0?t.ctx.drawImage(t.animationFrames.jumpingUp[t.state.player.dir],r,e):t.ctx.drawImage(t.animationFrames.jumpingDown[t.state.player.dir],r,e):0!==t.state.player.speed?t.state.player.dir?t.ctx.drawImage(t.animationFrames.runningRight[t.state.player.animationFrame],r,e):t.ctx.drawImage(t.animationFrames.runningLeft[t.state.player.animationFrame],r,e):t.ctx.drawImage(t.animationFrames.standing[t.state.player.dir],r,e),t.state.player.animationFrameCount+=t.state.dt,t.state.player.animationFrameCount>50&&(t.state.player.animationFrame+=1,t.state.player.animationFrameCount=0),t.state.player.animationFrame>3&&(t.state.player.animationFrame=0)}(be)),be.state.paused&&(!function(t){t.state.dt&&t.state.titles.opacity<100&&(t.state.titles.opacity+=Math.floor(.2*t.state.dt)),t.state.titles.opacity>100&&(t.state.titles.opacity=100),t.ctx.fillStyle="rgba(10, 10, 10, "+t.state.titles.opacity/100+")",t.ctx.rect(0,0,t.canvas.width,t.canvas.height),t.ctx.fill(),t.ctx.fillStyle="rgba(255, 236, 61, "+t.state.titles.opacity/100+")",t.ctx.font="64px 'Germania One', cursive",t.ctx.fillText(t.state.titles.text,600,520-40*function(t){const e=1.70158;return--t*t*((e+1)*t+e)+1}(t.state.titles.opacity/100)),100!=t.state.titles.opacity||t.input.jump||(t.state.titles.ready=!0),t.state.titles.ready&&t.input.jump&&(t.state=JSON.parse(JSON.stringify(t.savedState)),t.state.lastPlatform=null)}(be),xe||_e()),requestAnimationFrame(ke)}var Ee;Ee=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("iQ33o");var Pe;Pe=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("5PaZy");var Te;Te=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("jIilh");var Ie;Ie=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("6gG6s");var Ae;Ae=o("kPq84").getBundleURL("kyWCV")+o("bXuNP").resolve("4HCHH");(async()=>{be.savedState||(be.savedState=JSON.parse(JSON.stringify(be.state))),U(be),window.addEventListener("resize",(()=>U(be))),window.addEventListener("keydown",(t=>function(t,e){d(t,e,!0)}(be,t)),!1),window.addEventListener("keyup",(t=>function(t,e){d(t,e,!1)}(be,t)),!1),Xt.jump.ontouchstart=()=>be.input.jump=!0,Xt.jump.ontouchend=()=>be.input.jump=!1,Xt.left.ontouchstart=()=>be.input.left=!0,Xt.left.ontouchend=()=>be.input.left=!1,Xt.right.ontouchstart=()=>be.input.right=!0,Xt.right.ontouchend=()=>be.input.right=!1,qt.initialize(),function(t){const e=new URL(Ee),r=new URL(Pe),n=new URL(Te),o=new URL(Ie),i=new URL(Ae);F(t,e.pathname,"standing",0,!1),F(t,e.pathname,"standing",1,!0),F(t,r.pathname,"jumpingUp",0,!1),F(t,r.pathname,"jumpingUp",1,!0),F(t,n.pathname,"jumpingDown",0,!1),F(t,n.pathname,"jumpingDown",1,!0),F(t,o.pathname,"runningLeft",0,!1),F(t,o.pathname,"runningLeft",1,!1),F(t,i.pathname,"runningLeft",2,!1),F(t,i.pathname,"runningLeft",3,!1),F(t,o.pathname,"runningRight",0,!0),F(t,o.pathname,"runningRight",1,!0),F(t,i.pathname,"runningRight",2,!0),F(t,i.pathname,"runningRight",3,!0)}(be),ke()})().then((async()=>{let t=!1;Vt.jumping$.subscribe((async t=>{t||(ie.paused||ie.pause(),oe.paused&&await oe.play()),t&&(oe.paused||oe.pause(),ie.paused&&await ie.play())})),Vt.running$.subscribe((e=>{var r;!t&&e&&(je.reset(30),ue.play(),Se.pipe((r=()=>{be.state.paused||(be.state.paused=!0,Vt.pause(),Vt.idle(),_e())},Ut((function(t,e){try{t.subscribe(e)}finally{e.add(r)}})))).subscribe((t=>Zt.value=`${t}`)),t=!0),e||ae.pause(),e&&ae.play()}))}));
//# sourceMappingURL=index.2d5cbf47.js.map
